<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ã‚¿ãƒ¬ã‚¾æ”»ç•¥ã‚¢ãƒ—ãƒª - ãƒ–ãƒ«ãƒ¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼šã‚¹ã‚¿ãƒ¼ãƒ¬ã‚¾ãƒŠãƒ³ã‚¹</title>
    <style>
        /* CSSã¯å¤‰æ›´ãªã—ã®ãŸã‚çœç•¥ï¼ˆãã®ã¾ã¾ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ï¼‰ */
        body { font-family: 'Segoe UI', sans-serif; max-width: 100%; margin: 0; padding: 20px; background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 100%); color: #fff; line-height: 1.6; }
        h1, h2 { text-align: center; color: #ffd700; text-shadow: 0 0 10px #ffd700; }
        .container { max-width: 800px; margin: 0 auto; }
        .section { background: rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 20px; margin: 20px 0; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); }
        .intro { text-align: center; font-size: 1.1em; margin-bottom: 30px; opacity: 0.9; }
        .menu { display: flex; flex-direction: column; gap: 20px; margin: 30px 0; }
        .menu-btn { display: block; padding: 16px 24px; background: linear-gradient(135deg, #ffd700, #cc9900); color: #000; font-weight: bold; font-size: 1.15em; text-align: center; border-radius: 12px; text-decoration: none; box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4); transition: all 0.3s ease; }
        .menu-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255, 215, 0, 0.6); }
        .countdown { font-size: 1.6em; font-weight: bold; text-align: center; padding: 18px; margin: 12px 0; border-radius: 10px; background: rgba(0, 255, 136, 0.15); color: #00ff88; text-shadow: 0 0 12px #00ff88; }
        .countdown.é–‹å‚¬ä¸­ { background: rgba(255, 100, 100, 0.35); color: #ffdddd; text-shadow: 0 0 12px #ff6666; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 15px rgba(255,100,100,0.4); } 50% { box-shadow: 0 0 30px rgba(255,100,100,0.7); } }
        .note { text-align: center; font-size: 0.9em; opacity: 0.8; margin-top: 10px; }
        @media (max-width: 600px) { .countdown { font-size: 1.3em; padding: 14px; } .menu-btn { font-size: 1.05em; padding: 14px 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—¡ï¸ ãƒ–ãƒ«ãƒ¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼šã‚¹ã‚¿ãƒ¼ãƒ¬ã‚¾ãƒŠãƒ³ã‚¹<br>ã‚¹ãƒãƒ›æ”»ç•¥ã‚¢ãƒ—ãƒª</h1>

        <p class="intro">
            ã‚®ãƒ«ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒœã‚¹ã®æ™‚é–“ã‚’ã™ããƒã‚§ãƒƒã‚¯ï¼<br>
            ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ä¾¿åˆ©ã«ä½¿ãŠã†ï¼
        </p>

        <section class="section">
            <h2>â° ã‚®ãƒ«ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
            <div id="guild_dance" class="countdown">ã‚®ãƒ«ãƒ‰ãƒ€ãƒ³ã‚¹<br><span>è¨ˆç®—ä¸­...</span></div>
            <div id="guild_hunt" class="countdown">æ¬¡å›ã‚®ãƒ«ãƒ‰ãƒãƒ³ãƒˆ<br><span>è¨ˆç®—ä¸­...</span></div>
            <p class="note">â€»JSTåŸºæº– | é–‹å‚¬ä¸­ã¯èµ¤ãç‚¹æ»…ã—ã¾ã™</p>
        </section>

        <section class="section">
            <h2>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒœã‚¹å‡ºç¾ã‚¿ã‚¤ãƒãƒ¼</h2>
            <div id="boss00" class="countdown">æ¬¡å›00åˆ†æ²¸ããƒœã‚¹<br><span>è¨ˆç®—ä¸­...</span></div>
            <div id="boss30" class="countdown">æ¬¡å›30åˆ†æ²¸ããƒœã‚¹<br><span>è¨ˆç®—ä¸­...</span></div>
            <p class="note">æ¯æ™‚00åˆ† / 30åˆ†ã«ãƒªãƒãƒƒãƒ—ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«åˆ¥ç‹¬ç«‹ï¼‰</p>
        </section>

        <section class="section">
            <h2>ğŸ“Œ å„ç¨®æƒ…å ±ãƒšãƒ¼ã‚¸</h2>
            <div class="menu">
                <a href="weeklydelivery.html" class="menu-btn">ç”Ÿç”£è· é€±é–“ç´å“ä¸€è¦§</a>
                <a href="Equipment.html" class="menu-btn">ãƒ‰ãƒ­ãƒƒãƒ—è£…å‚™èƒ½åŠ›ä¸€è¦§</a>
                <a href="daily-event.html" class="menu-btn">æ¯æ—¥é–‹å‚¬ã‚¤ãƒ™ãƒ³ãƒˆ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</a>
            </div>
        </section>
    </div>

    <script>
        /**
         * è¨­å®šãƒ‡ãƒ¼ã‚¿
         */
        const EVENTS = {
            dance: { id: 'guild_dance', days: [5], start: "19:30", duration: 25, label: "ã‚®ãƒ«ãƒ‰ãƒ€ãƒ³ã‚¹" },
            hunt:  { id: 'guild_hunt',  days: [5, 6, 0], start: "10:00", duration: 840, label: "ã‚®ãƒ«ãƒ‰ãƒãƒ³ãƒˆ" }, // 24:00ã¾ã§
            boss00: { id: 'boss00', days: [0,1,2,3,4,5,6], start: "00", isBoss: true },
            boss30: { id: 'boss30', days: [0,1,2,3,4,5,6], start: "30", isBoss: true }
        };

        function getJSTNow() {
            const now = new Date();
            const jstOffset = 9 * 60;
            return new Date(now.getTime() + (jstOffset + now.getTimezoneOffset()) * 60000);
        }

        function formatRemaining(ms) {
            const h = Math.floor(ms / 3600000);
            const m = Math.floor((ms % 3600000) / 60000);
            const s = Math.floor((ms % 60000) / 1000);
            return `${h}æ™‚é–“ ${m}åˆ† ${s}ç§’`;
        }

        /**
         * ãƒ¡ã‚¤ãƒ³æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯
         */
        function update() {
            const now = getJSTNow();

            Object.values(EVENTS).forEach(ev => {
                const el = document.getElementById(ev.id);
                const span = el.querySelector('span');
                let nextStart = null;
                let isOngoing = false;

                if (ev.isBoss) {
                    // ãƒœã‚¹ã‚¿ã‚¤ãƒãƒ¼ãƒ­ã‚¸ãƒƒã‚¯
                    const targetMin = parseInt(ev.start);
                    nextStart = new Date(now);
                    nextStart.setMinutes(targetMin, 0, 0);
                    if (now.getMinutes() >= targetMin) nextStart.setHours(now.getHours() + 1);
                    
                    isOngoing = (now.getMinutes() === targetMin);
                    span.textContent = isOngoing ? "å‡ºç¾ä¸­ï¼" : formatRemaining(nextStart - now);
                } else {
                    // ã‚®ãƒ«ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
                    const [h, m] = ev.start.split(':').map(Number);
                    
                    // ç›´è¿‘ã®é–‹å‚¬æ—¥ã‚’æ¢ã™
                    for (let i = 0; i < 7; i++) {
                        const d = new Date(now);
                        d.setDate(d.getDate() + i);
                        if (ev.days.includes(d.getDay())) {
                            const start = new Date(d);
                            start.setHours(h, m, 0, 0);
                            const end = new Date(start.getTime() + ev.duration * 60000);

                            if (now >= start && now < end) {
                                isOngoing = true;
                                break;
                            }
                            if (start > now) {
                                nextStart = start;
                                break;
                            }
                        }
                    }
                    span.textContent = isOngoing ? "é–‹å‚¬ä¸­ï¼" : (nextStart ? formatRemaining(nextStart - now) : "æº–å‚™ä¸­");
                }

                // çŠ¶æ…‹ã«åˆã‚ã›ã¦ã‚¯ãƒ©ã‚¹ã‚’å¤‰æ›´
                el.classList.toggle('é–‹å‚¬ä¸­', isOngoing);
            });
        }

        setInterval(update, 1000);
        update();
    </script>
</body>
</html>



